"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[108],{7083(e,n,t){t.d(n,{W:()=>i});var s=t(6666);function i(){const{lang:e}=(0,s.o)();return"zh"===e}},9319(e,n,t){t.r(n),t.d(n,{default:()=>Ze});var s=t(6540),i=t(6025),r=t(7083);const a="demoContainer_ryNF",o="sidebar_kzhx",l="sidebarCollapsed_aHN1",c="sidebarHeader_GJAu",d="sidebarToggleRow_FCvB",u="logoLink_Tm9p",h="logoImg_bOJl",p="toggleBtn_rufA",m="toggleBtnRotated_B7u9",g="navBtn_No_P",v="navIcon_Iml1",x="navText_n5e0",f="sessionList_XX5B",j="sessionLabel_dPXV",C="sessionItem_RiEI",w="sessionActive_lDZb",y="sessionTitle_EoAg",k="sidebarFooter_Vyd8",b="chatMain_Pa8Z",_="viewHeader_01jP",A="pipelineDropdownWrapper_ZRzX",N="btnPipelineSelect_IsE1",R="pipelineName_BnBs",P="pipelineSubtext_FGHG",G="pipelineMenu_ggld",S="pipelineMenuItem__afh",M="pipelineMenuItemActive_rBgB",T="pipelineCheck_LIOp",U="chatContainer_hBnD",B="chatContainerEmpty_sGeY",L="chatHistory_YlMT",I="chatBubble_GR1s",W="chatBubbleUser_JOtg",D="chatBubbleAssistant_WRam",H="msgContent_OVas",$="mdP_Wgwa",E="mdH2_ohAJ",z="mdH3_stox",q="mdBlockquote_a4rp",K="mdUl_IZVO",Y="mdLi_sewr",F="inlineCode_PIYe",O="codeBlockWrapper_zP81",V="codeBlockHeader_RgVw",Q="codeBlockLang_WY3u",J="codeBlockCopy_EfYW",X="copied_Ui2c",Z="codeBlockPre_f_UD",ee="processContainer_KqKR",ne="processHeader_HCLn",te="processHeaderDot_IwM8",se="processCollapsed_ucBO",ie="processHeaderText_MJ1o",re="processChevron_uKwn",ae="processChevronOpen_et3q",oe="processBody_AEsp",le="processStep_qDDa",ce="stepTitle_Qh3D",de="stepDetails_CE0J",ue="referenceContainer_D_aR",he="refItem_fdL_",pe="refUsed_Cjny",me="refUnused_lhAh",ge="refId_LI94",ve="refTitle_NR7V",xe="unusedRefsSection_Xh3g",fe="unusedToggle_I5Yh",je="unusedChevronOpen_Beeh",Ce="chatInputWrapper_rVM3",we="chatInputContainer_vbYm",ye="chatInput_F9B0",ke="actionsRow_IjG9",be="leftActions_gKea",_e="rightActions_eFUl",Ae="kbSelectorPill_I8NS",Ne="btnSend_X4FR",Re="emptyStateWrapper_Y1HF",Pe="greetingSection_Dzvr",Ge="greetingGradient_KPD7",Se="aiThinking_yBni",Me="aiThinkingDot_VWpO",Te="toast_qnbs",Ue="toastIcon_nBey",Be="mobileMenuBtn_Ntoh",Le="sidebarBackdrop_vCiN";var Ie=t(4848);const We=[{name:"LLM",id:"llm"},{name:"RAG",id:"rag"},{name:"LightResearch",id:"lightresearch"},{name:"AgentCPM-Report",id:"agentcpm-report"}],De={en:[{id:1,title:"UltraRAG Introduction"},{id:2,title:"UltraRAG Architecture"}],zh:[{id:1,title:"UltraRAG \u9879\u76ee\u7b80\u4ecb"},{id:2,title:"UltraRAG \u67b6\u6784\u8be6\u89e3"}]},He={en:{1:[{role:"user",content:"What is UltraRAG?"},{role:"assistant",steps:[{name:"Query Analysis",detail:"Parse user question and extract key intent"},{name:"Dense Retrieval",detail:"Retrieve project documentation from knowledge base"},{name:"Response Generation",detail:"Generate answer based on retrieved results"}],content:"### About UltraRAG\n\nUltraRAG is the first lightweight RAG development framework designed with **Model Context Protocol (MCP)** architecture, built specifically for scientific research exploration and industrial prototype design.\n\nIt standardizes core RAG components (such as Retriever, Generation, etc.) as independent **MCP Servers**, enabling flexible extension through function-level Tool interfaces. Combined with the MCP Client's workflow orchestration capabilities, developers can precisely orchestrate complex control structures (such as conditionals, loops) through YAML configuration. Additionally, the system supports seamless migration of algorithm logic to conversational demonstration interfaces, greatly optimizing the full development chain efficiency of complex RAG systems.\n\n### Core Architecture\n\nUltraRAG consists of four key components:\n\n- **Pipeline \xb7 Workflow Definition**: Task logic written by users through YAML, defining the execution order and business logic of each component, achieving configuration-based reasoning workflows\n- **Client \xb7 Scheduling Hub**: Responsible for parsing Pipeline configurations, uniformly coordinating tool invocations and data transfer between Servers, ensuring precise workflow execution\n- **Server \xb7 Function Execution**: Standardizes core functions as independent services, supporting rapid extension and flexible combination of new modules through simple interfaces\n- **UI \xb7 Interactive Demonstration**: Transforms YAML-defined logic into intuitive conversational interfaces with one click, significantly improving debugging efficiency and demonstration effects\n\n> The system supports seamless migration of algorithm logic to conversational demonstration interfaces, greatly optimizing the full development chain efficiency of complex RAG systems.",sources:[{id:1,title:"UltraRAG Introduction",used:!0},{id:2,title:"MCP Architecture Design",used:!0},{id:3,title:"Getting Started Guide",used:!0}]},{role:"user",content:"Why choose UltraRAG?"},{role:"assistant",steps:[{name:"Intent Recognition",detail:"Identify user comparison needs"},{name:"Doc Retrieval",detail:"Retrieve Why UltraRAG documentation"},{name:"Answer Synthesis",detail:"Compile core advantages"}],content:"RAG systems are undergoing a paradigm evolution from static chain concatenation to autonomous reasoning, increasingly relying on active model reasoning, dynamic retrieval, and conditional decision-making. However, traditional frameworks often face bottlenecks of insufficient flexibility and deep module coupling.\n\nUltraRAG aims to provide developers with a **standardized, decoupled, and minimalist** new development paradigm:\n\n### \ud83d\ude80 Low-Code Pipeline Orchestration\nNatively supports serial, loop, and conditional branch control structures. Developers only need to write YAML configuration files to implement complex iterative RAG logic in just dozens of lines of code.\n\n### \u26a1 Modular Extension & Packaging\nBased on MCP architecture, functions are decoupled into independent Servers. New features only need to be registered as function-level Tools to seamlessly integrate into workflows, achieving extremely high reusability.\n\n### \ud83d\udcca Unified Evaluation & Benchmarking\nBuilt-in standardized evaluation process with ready-to-use mainstream research Benchmarks. Through unified metric management and baseline integration, greatly improving experimental reproducibility and comparison efficiency.\n\n### \u2728 Interactive Prototype Generation\nSay goodbye to tedious UI development. With just one command, Pipeline logic can be instantly transformed into an interactive conversational Web UI, shortening the distance from algorithm to demonstration.",sources:[{id:1,title:"Why UltraRAG - Introduction",used:!0},{id:2,title:"UltraRAG vs Traditional Frameworks",used:!0},{id:3,title:"MCP Architecture Advantages",used:!1}]}],2:[{role:"user",content:"How is UltraRAG's MCP architecture designed?"},{role:"assistant",steps:[{name:"Query Understanding",detail:"Identify user interest in architecture"},{name:"Knowledge Retrieval",detail:"Retrieve MCP architecture design docs"}],content:'UltraRAG is designed based on the **Model Context Protocol (MCP)** architecture, decomposing the core capabilities of RAG systems into standardized service units:\n\n### MCP Server \u2014 Atomic Capability Carrier\nEach MCP Server encapsulates an independent function, such as document retrieval, vector indexing, text generation, etc. New features only need to be registered as function-level **Tools** in the Server to seamlessly integrate into the entire workflow:\n\n```python\n@app.tool(output="query,top_k>doc_list")\ndef dense_retrieve(query: str, top_k: int = 5):\n    """Retrieve the most relevant document fragments from the vector database"""\n    ret = retriever.search(query, top_k=top_k)\n    return {"doc_list": ret}\n```\n\n### MCP Client \u2014 Intelligent Scheduling Hub\nThe Client is responsible for parsing Pipeline configuration files, uniformly coordinating tool invocations and data transfer between Servers. It supports:\n- **Serial Execution**: Invoke steps sequentially in order\n- **Conditional Branching**: Dynamically select paths based on intermediate results\n- **Loop Iteration**: Support multi-round retrieval-reasoning self-correction\n\nA typical RAG Pipeline configuration:\n\n```yaml examples/rag_full.yaml\n# MCP Server\nservers:\n  benchmark: servers/benchmark\n  retriever: servers/retriever\n  prompt: servers/prompt\n  generation: servers/generation\n  evaluation: servers/evaluation\n  custom: servers/custom\n\n# MCP Client Pipeline\npipeline:\n- benchmark.get_data\n- retriever.retriever_init\n- retriever.retriever_embed\n- retriever.retriever_index\n- retriever.retriever_search\n- generation.generation_init\n- prompt.qa_rag_boxed\n- generation.generate\n- custom.output_extract_from_boxed\n- evaluation.evaluate\n```\n\n### Core Advantages\n- **Decoupling**: Servers are completely independent, can be developed, tested, and deployed separately\n- **Extensibility**: Zero-intrusion for new modules, registration of a Tool completes integration\n- **Reproducibility**: Same Pipeline YAML + Server configuration = exactly the same execution results\n\n> MCP architecture makes every step of the RAG system transparent, controllable, and reproducible.',sources:[{id:1,title:"MCP Architecture Design",used:!0},{id:2,title:"Server Development Guide",used:!0}]}]},zh:{1:[{role:"user",content:"\u8bf7\u4ecb\u7ecd\u4e00\u4e0b UltraRAG \u662f\u4ec0\u4e48\uff1f"},{role:"assistant",steps:[{name:"Query Analysis",detail:"\u89e3\u6790\u7528\u6237\u95ee\u9898\uff0c\u63d0\u53d6\u5173\u952e\u610f\u56fe"},{name:"Dense Retrieval",detail:"\u4ece\u77e5\u8bc6\u5e93\u4e2d\u68c0\u7d22\u9879\u76ee\u6587\u6863"},{name:"Response Generation",detail:"\u57fa\u4e8e\u68c0\u7d22\u7ed3\u679c\u751f\u6210\u56de\u7b54"}],content:"### \u5173\u4e8e UltraRAG\n\n      UltraRAG \u662f\u9996\u4e2a\u57fa\u4e8e **Model Context Protocol (MCP)** \u67b6\u6784\u8bbe\u8ba1\u7684\u8f7b\u91cf\u7ea7 RAG \u5f00\u53d1\u6846\u67b6\uff0c\u4e13\u4e3a\u79d1\u7814\u63a2\u7d22\u4e0e\u5de5\u4e1a\u539f\u578b\u8bbe\u8ba1\u6253\u9020\u3002\n\n\u5b83\u5c06 RAG \u4e2d\u7684\u6838\u5fc3\u7ec4\u4ef6\uff08\u5982 Retriever\u3001Generation \u7b49\uff09\u6807\u51c6\u5316\u5c01\u88c5\u4e3a\u72ec\u7acb\u7684 **MCP Server**\uff0c\u5b9e\u73b0\u4e86\u57fa\u4e8e\u51fd\u6570\u7ea7 Tool \u63a5\u53e3\u7684\u7075\u6d3b\u6269\u5c55\u3002\u914d\u5408 MCP Client \u7684\u6d41\u7a0b\u8c03\u5ea6\u80fd\u529b\uff0c\u5f00\u53d1\u8005\u80fd\u591f\u901a\u8fc7 YAML \u914d\u7f6e\u5b9e\u73b0\u5bf9\u590d\u6742\u63a7\u5236\u7ed3\u6784\uff08\u5982\u6761\u4ef6\u3001\u5faa\u73af\u7b49\uff09\u7684\u7cbe\u786e\u7f16\u6392\u3002\u6b64\u5916\uff0c\u7cfb\u7edf\u652f\u6301\u7b97\u6cd5\u903b\u8f91\u5411\u5bf9\u8bdd\u6f14\u793a\u754c\u9762\u7684\u65e0\u7f1d\u8fc1\u79fb\uff0c\u6781\u5927\u5730\u4f18\u5316\u4e86\u590d\u6742 RAG \u7cfb\u7edf\u7684\u5f00\u53d1\u5168\u94fe\u8def\u6548\u7387\u3002\n\n### \u6838\u5fc3\u67b6\u6784\n\nUltraRAG \u7531\u56db\u4e2a\u5173\u952e\u7ec4\u4ef6\u6784\u6210\uff1a\n\n- **Pipeline \xb7 \u6d41\u7a0b\u5b9a\u4e49**\uff1a\u7528\u6237\u901a\u8fc7 YAML \u7f16\u5199\u7684\u4efb\u52a1\u903b\u8f91\uff0c\u5b9a\u4e49\u4e86\u5404\u7ec4\u4ef6\u7684\u6267\u884c\u987a\u5e8f\u4e0e\u4e1a\u52a1\u903b\u8f91\uff0c\u5b9e\u73b0\u63a8\u7406\u6d41\u7a0b\u7684\u914d\u7f6e\u5316\n- **Client \xb7 \u8c03\u5ea6\u4e2d\u67a2**\uff1a\u8d1f\u8d23\u89e3\u6790 Pipeline \u914d\u7f6e\uff0c\u7edf\u4e00\u534f\u8c03\u5404 Server \u95f4\u5de5\u5177\u7684\u8c03\u7528\u4e0e\u6570\u636e\u4f20\u9012\uff0c\u786e\u4fdd\u6d41\u7a0b\u7cbe\u51c6\u6267\u884c\n- **Server \xb7 \u529f\u80fd\u6267\u884c**\uff1a\u5c06\u6838\u5fc3\u529f\u80fd\u6807\u51c6\u5316\u5c01\u88c5\u4e3a\u72ec\u7acb\u670d\u52a1\uff0c\u652f\u6301\u901a\u8fc7\u7b80\u5355\u63a5\u53e3\u5b9e\u73b0\u65b0\u6a21\u5757\u7684\u5feb\u901f\u6269\u5c55\u4e0e\u7075\u6d3b\u7ec4\u5408\n- **UI \xb7 \u4ea4\u4e92\u6f14\u793a**\uff1a\u5c06 YAML \u5b9a\u4e49\u7684\u903b\u8f91\u4e00\u952e\u8f6c\u5316\u4e3a\u76f4\u89c2\u7684\u5bf9\u8bdd\u754c\u9762\uff0c\u663e\u8457\u63d0\u5347\u7cfb\u7edf\u7684\u8c03\u8bd5\u6548\u7387\u4e0e\u6f14\u793a\u6548\u679c\n\n> \u7cfb\u7edf\u652f\u6301\u7b97\u6cd5\u903b\u8f91\u5411\u5bf9\u8bdd\u6f14\u793a\u754c\u9762\u7684\u65e0\u7f1d\u8fc1\u79fb\uff0c\u6781\u5927\u5730\u4f18\u5316\u4e86\u590d\u6742 RAG \u7cfb\u7edf\u7684\u5f00\u53d1\u5168\u94fe\u8def\u6548\u7387\u3002",sources:[{id:1,title:"UltraRAG \u9879\u76ee\u7b80\u4ecb",used:!0},{id:2,title:"MCP \u67b6\u6784\u8bbe\u8ba1\u6587\u6863",used:!0},{id:3,title:"Getting Started Guide",used:!0}]},{role:"user",content:"\u4e3a\u4ec0\u4e48\u8981\u9009\u62e9 UltraRAG\uff1f"},{role:"assistant",steps:[{name:"Intent Recognition",detail:"\u8bc6\u522b\u7528\u6237\u5bf9\u6bd4\u9700\u6c42"},{name:"Doc Retrieval",detail:"\u68c0\u7d22 Why UltraRAG \u6587\u6863"},{name:"Answer Synthesis",detail:"\u6574\u5408\u6838\u5fc3\u4f18\u52bf\u8bf4\u660e"}],content:"RAG \u7cfb\u7edf\u6b63\u7ecf\u5386\u4ece\u9759\u6001\u94fe\u5f0f\u4e32\u8054\u5411\u81ea\u4e3b\u63a8\u7406\u4f53\u7cfb\u7684\u8303\u5f0f\u6f14\u8fdb\uff0c\u6108\u53d1\u4f9d\u8d56\u6a21\u578b\u7684\u4e3b\u52a8\u63a8\u7406\u3001\u52a8\u6001\u68c0\u7d22\u4e0e\u6761\u4ef6\u51b3\u7b56\u3002\u7136\u800c\u4f20\u7edf\u6846\u67b6\u5f80\u5f80\u9762\u4e34\u7075\u6d3b\u6027\u4e0d\u8db3\u3001\u6a21\u5757\u6df1\u5ea6\u8026\u5408\u7b49\u74f6\u9888\u3002\n\nUltraRAG \u65e8\u5728\u4e3a\u5f00\u53d1\u8005\u63d0\u4f9b\u4e00\u5957**\u6807\u51c6\u5316\u3001\u89e3\u8026\u4e14\u6781\u7b80**\u7684\u5f00\u53d1\u65b0\u8303\u5f0f\uff1a\n\n### \ud83d\ude80 \u4f4e\u4ee3\u7801\u7f16\u6392\u590d\u6742\u6d41\u7a0b\n\u539f\u751f\u652f\u6301\u4e32\u884c\u3001\u5faa\u73af\u4e0e\u6761\u4ef6\u5206\u652f\u7b49\u63a7\u5236\u7ed3\u6784\u3002\u5f00\u53d1\u8005\u4ec5\u9700\u7f16\u5199 YAML \u914d\u7f6e\u6587\u4ef6\uff0c\u5373\u53ef\u5728\u6570\u5341\u884c\u4ee3\u7801\u5185\u5b9e\u73b0\u590d\u6742\u7684\u8fed\u4ee3\u5f0f RAG \u903b\u8f91\u3002\n\n### \u26a1 \u6a21\u5757\u5316\u6269\u5c55\u4e0e\u590d\u73b0\n\u57fa\u4e8e MCP \u67b6\u6784\u5c06\u529f\u80fd\u89e3\u8026\u4e3a\u72ec\u7acb Server\u3002\u65b0\u529f\u80fd\u4ec5\u9700\u4ee5\u51fd\u6570\u7ea7 Tool \u5f62\u5f0f\u6ce8\u518c\uff0c\u5373\u53ef\u65e0\u7f1d\u63a5\u5165\u6d41\u7a0b\uff0c\u5b9e\u73b0\u6781\u9ad8\u7684\u590d\u7528\u6027\u3002\n\n### \ud83d\udcca \u7edf\u4e00\u8bc4\u6d4b\u4e0e\u57fa\u51c6\u5bf9\u6bd4\n\u5185\u7f6e\u6807\u51c6\u5316\u8bc4\u6d4b\u6d41\u7a0b\uff0c\u5f00\u7bb1\u5373\u7528\u4e3b\u6d41\u79d1\u7814 Benchmark\u3002\u901a\u8fc7\u7edf\u4e00\u6307\u6807\u7ba1\u7406\u4e0e\u57fa\u7ebf\u96c6\u6210\uff0c\u5927\u5e45\u63d0\u5347\u5b9e\u9a8c\u7684\u53ef\u590d\u73b0\u6027\u4e0e\u5bf9\u6bd4\u6548\u7387\u3002\n\n### \u2728 \u4ea4\u4e92\u539f\u578b\u5feb\u901f\u751f\u6210\n\u544a\u522b\u7e41\u7410\u7684 UI \u5f00\u53d1\u3002\u4ec5\u9700\u4e00\u884c\u547d\u4ee4\uff0c\u5373\u53ef\u5c06 Pipeline \u903b\u8f91\u77ac\u95f4\u8f6c\u5316\u4e3a\u53ef\u4ea4\u4e92\u7684\u5bf9\u8bdd\u5f0f Web UI\uff0c\u7f29\u77ed\u4ece\u7b97\u6cd5\u5230\u6f14\u793a\u7684\u8ddd\u79bb\u3002",sources:[{id:1,title:"Why UltraRAG - \u9879\u76ee\u7b80\u4ecb",used:!0},{id:2,title:"UltraRAG vs \u4f20\u7edf\u6846\u67b6\u5bf9\u6bd4",used:!0},{id:3,title:"MCP \u67b6\u6784\u4f18\u52bf\u5206\u6790",used:!1}]}],2:[{role:"user",content:"UltraRAG \u7684 MCP \u67b6\u6784\u662f\u600e\u4e48\u8bbe\u8ba1\u7684\uff1f"},{role:"assistant",steps:[{name:"Query Understanding",detail:"\u8bc6\u522b\u7528\u6237\u5bf9\u67b6\u6784\u7684\u5174\u8da3"},{name:"Knowledge Retrieval",detail:"\u68c0\u7d22 MCP \u67b6\u6784\u8bbe\u8ba1\u6587\u6863"}],content:'UltraRAG \u57fa\u4e8e **Model Context Protocol (MCP)** \u67b6\u6784\u8bbe\u8ba1\uff0c\u5c06 RAG \u7cfb\u7edf\u7684\u6838\u5fc3\u80fd\u529b\u62c6\u89e3\u4e3a\u6807\u51c6\u5316\u7684\u670d\u52a1\u5355\u5143\uff1a\n\n### MCP Server \u2014 \u539f\u5b50\u5316\u80fd\u529b\u8f7d\u4f53\n\u6bcf\u4e2a MCP Server \u5c01\u88c5\u4e00\u9879\u72ec\u7acb\u529f\u80fd\uff0c\u5982\u6587\u6863\u68c0\u7d22\u3001\u5411\u91cf\u7d22\u5f15\u3001\u6587\u672c\u751f\u6210\u7b49\u3002\u65b0\u529f\u80fd\u53ea\u9700\u4ee5\u51fd\u6570\u7ea7 **Tool** \u5f62\u5f0f\u6ce8\u518c\u5230 Server \u4e2d\uff0c\u5373\u53ef\u65e0\u7f1d\u63a5\u5165\u6574\u4e2a\u6d41\u7a0b\uff1a\n\n```python\n@app.tool(output="query,top_k>doc_list")\ndef dense_retrieve(query: str, top_k: int = 5):\n    """\u4ece\u5411\u91cf\u6570\u636e\u5e93\u4e2d\u68c0\u7d22\u6700\u76f8\u5173\u7684\u6587\u6863\u7247\u6bb5"""\n    ret = retriever.search(query, top_k=top_k)\n    return {"doc_list": ret}\n```\n\n### MCP Client \u2014 \u667a\u80fd\u8c03\u5ea6\u4e2d\u67a2\nClient \u8d1f\u8d23\u89e3\u6790 Pipeline \u914d\u7f6e\u6587\u4ef6\uff0c\u7edf\u4e00\u534f\u8c03\u5404 Server \u95f4\u5de5\u5177\u7684\u8c03\u7528\u4e0e\u6570\u636e\u4f20\u9012\u3002\u5b83\u652f\u6301\uff1a\n- **\u4e32\u884c\u6267\u884c**\uff1a\u6309\u987a\u5e8f\u4f9d\u6b21\u8c03\u7528\u5404\u6b65\u9aa4\n- **\u6761\u4ef6\u5206\u652f**\uff1a\u6839\u636e\u4e2d\u95f4\u7ed3\u679c\u52a8\u6001\u9009\u62e9\u8def\u5f84\n- **\u5faa\u73af\u8fed\u4ee3**\uff1a\u652f\u6301\u591a\u8f6e\u68c0\u7d22-\u63a8\u7406\u7684\u81ea\u6211\u4fee\u6b63\n\n\u4e00\u4e2a\u5178\u578b\u7684 RAG Pipeline \u914d\u7f6e\uff1a\n\n```yaml examples/rag_full.yaml\n# MCP Server\nservers:\n  benchmark: servers/benchmark\n  retriever: servers/retriever\n  prompt: servers/prompt\n  generation: servers/generation\n  evaluation: servers/evaluation\n  custom: servers/custom\n\n# MCP Client Pipeline\npipeline:\n- benchmark.get_data\n- retriever.retriever_init\n- retriever.retriever_embed\n- retriever.retriever_index\n- retriever.retriever_search\n- generation.generation_init\n- prompt.qa_rag_boxed\n- generation.generate\n- custom.output_extract_from_boxed\n- evaluation.evaluate\n```\n\n### \u6838\u5fc3\u4f18\u52bf\n- **\u89e3\u8026\u6027**\uff1aServer \u4e4b\u95f4\u5b8c\u5168\u72ec\u7acb\uff0c\u53ef\u5355\u72ec\u5f00\u53d1\u3001\u6d4b\u8bd5\u548c\u90e8\u7f72\n- **\u53ef\u6269\u5c55\u6027**\uff1a\u65b0\u589e\u6a21\u5757\u96f6\u4fb5\u5165\uff0c\u6ce8\u518c Tool \u5373\u5b8c\u6210\u96c6\u6210\n- **\u53ef\u590d\u73b0\u6027**\uff1a\u76f8\u540c Pipeline YAML + Server \u914d\u7f6e = \u5b8c\u5168\u76f8\u540c\u7684\u6267\u884c\u7ed3\u679c\n\n> MCP \u67b6\u6784\u8ba9 RAG \u7cfb\u7edf\u7684\u6bcf\u4e00\u4e2a\u73af\u8282\u90fd\u53d8\u5f97\u900f\u660e\u3001\u53ef\u63a7\u4e14\u53ef\u590d\u73b0\u3002',sources:[{id:1,title:"MCP \u67b6\u6784\u8bbe\u8ba1\u6587\u6863",used:!0},{id:2,title:"Server \u5f00\u53d1\u6307\u5357",used:!0}]}]}},$e={en:[{steps:[{name:"Query Analysis",detail:"Analyze user question"},{name:"Dense Retrieval",detail:"Retrieve relevant documents from knowledge base"},{name:"Response Generation",detail:"Generate answer based on retrieved results"}],content:"Thank you for your question! This is a Demo environment showcasing UltraRAG's conversational interface.\n\nUltraRAG is the first lightweight RAG development framework based on **MCP (Model Context Protocol)** architecture. In actual deployment, the system will:\n- Retrieve relevant document fragments from your knowledge base through **MCP Server**\n- Coordinate multi-step reasoning workflows orchestrated by Pipeline through **MCP Client**\n- Generate high-quality, **traceable** answers based on retrieved facts\n\n> To experience full functionality, please visit the [Deployment Guide](https://ultrarag.openbmb.cn/pages/en/ui/prepare) for local deployment instructions.",sources:[{id:1,title:"UltraRAG Introduction",used:!0},{id:2,title:"Deployment Guide",used:!0}]}],zh:[{steps:[{name:"Query Analysis",detail:"\u5206\u6790\u7528\u6237\u95ee\u9898"},{name:"Dense Retrieval",detail:"\u4ece\u77e5\u8bc6\u5e93\u4e2d\u68c0\u7d22\u76f8\u5173\u6587\u6863"},{name:"Response Generation",detail:"\u57fa\u4e8e\u68c0\u7d22\u7ed3\u679c\u751f\u6210\u56de\u7b54"}],content:"\u611f\u8c22\u60a8\u7684\u63d0\u95ee\uff01\u8fd9\u662f\u4e00\u4e2a Demo \u6f14\u793a\u73af\u5883\uff0c\u5c55\u793a\u4e86 UltraRAG \u7684\u5bf9\u8bdd\u4ea4\u4e92\u754c\u9762\u3002\n\nUltraRAG \u662f\u9996\u4e2a\u57fa\u4e8e **MCP\uff08Model Context Protocol\uff09** \u67b6\u6784\u7684\u8f7b\u91cf\u7ea7 RAG \u5f00\u53d1\u6846\u67b6\u3002\u5728\u5b9e\u9645\u90e8\u7f72\u4e2d\uff0c\u7cfb\u7edf\u4f1a\uff1a\n- \u901a\u8fc7 **MCP Server** \u4ece\u60a8\u7684\u77e5\u8bc6\u5e93\u4e2d\u68c0\u7d22\u76f8\u5173\u6587\u6863\u7247\u6bb5\n- \u7531 **MCP Client** \u534f\u8c03 Pipeline \u7f16\u6392\u7684\u591a\u6b65\u63a8\u7406\u6d41\u7a0b\n- \u57fa\u4e8e\u68c0\u7d22\u5230\u7684\u4e8b\u5b9e\u751f\u6210\u9ad8\u8d28\u91cf\u3001**\u53ef\u6eaf\u6e90**\u7684\u56de\u7b54\n\n> \u5982\u9700\u4f53\u9a8c\u5b8c\u6574\u529f\u80fd\uff0c\u8bf7\u8bbf\u95ee [\u90e8\u7f72\u6307\u5357](https://ultrarag.openbmb.cn/pages/cn/ui/prepare) \u4e86\u89e3\u672c\u5730\u90e8\u7f72\u65b9\u5f0f\u3002",sources:[{id:1,title:"UltraRAG \u9879\u76ee\u7b80\u4ecb",used:!0},{id:2,title:"\u90e8\u7f72\u6307\u5357",used:!0}]}]},Ee={en:{newChat:"New Chat",knowledgeBase:"Knowledge Base",recentChats:"RECENT",backToHome:"Back to Home",thinkingProcess:"Thinking Process",copy:"Copy",collapse:"Collapse",expand:"Expand",unreferencedDocs:"unreferenced documents",askUltraRAG:"Ask UltraRAG",exploreToday:"What would you like to explore?",toastNewChat:"New chat created",toastSwitchPipeline:"Switched to",toastKnowledgeBase:"Knowledge base management is available after local deployment",toastKnowledgeSwitch:"Knowledge base switching is available after local deployment",newChatTitle:"New Chat"},zh:{newChat:"\u65b0\u5efa\u5bf9\u8bdd",knowledgeBase:"\u77e5\u8bc6\u5e93",recentChats:"\u6700\u8fd1\u5bf9\u8bdd",backToHome:"\u8fd4\u56de\u5b98\u7f51",thinkingProcess:"\u601d\u8003\u8fc7\u7a0b",copy:"\u590d\u5236",collapse:"\u6536\u8d77",expand:"\u5c55\u5f00",unreferencedDocs:"\u4e2a\u672a\u5f15\u7528\u6587\u6863",askUltraRAG:"\u5411 UltraRAG \u63d0\u95ee",exploreToday:"\u4eca\u5929\u60f3\u63a2\u7d22\u4ec0\u4e48\uff1f",toastNewChat:"\u5df2\u521b\u5efa\u65b0\u5bf9\u8bdd",toastSwitchPipeline:"\u5df2\u5207\u6362\u5230",toastKnowledgeBase:"\u77e5\u8bc6\u5e93\u7ba1\u7406\u529f\u80fd\u8bf7\u5728\u672c\u5730\u90e8\u7f72\u540e\u4f7f\u7528",toastKnowledgeSwitch:"\u77e5\u8bc6\u5e93\u5207\u6362\u529f\u80fd\u8bf7\u5728\u672c\u5730\u90e8\u7f72\u540e\u4f7f\u7528",newChatTitle:"\u65b0\u5bf9\u8bdd"}};function ze({message:e,visible:n,onClose:t}){return(0,s.useEffect)(()=>{if(n){const e=setTimeout(t,2500);return()=>clearTimeout(e)}},[n,t]),n?(0,Ie.jsxs)("div",{className:Te,children:[(0,Ie.jsx)("span",{className:Ue,children:"\u2139"}),(0,Ie.jsx)("span",{children:e})]}):null}function qe({collapsed:e,onToggle:n,activeSession:t,sessions:s,onSessionChange:r,onNewChat:a,onShowToast:b,t:_}){const A=(0,i.Ay)("img/ultrarag.svg"),N=(0,i.Ay)("/");return(0,Ie.jsxs)("aside",{className:`${o} ${e?l:""}`,children:[(0,Ie.jsxs)("div",{className:c,children:[(0,Ie.jsxs)("div",{className:d,children:[!e&&(0,Ie.jsx)("button",{className:u,onClick:a,title:_.newChat,children:(0,Ie.jsx)("img",{src:A,alt:"UltraRAG",className:h})}),(0,Ie.jsx)("button",{className:`${p} ${e?m:""}`,onClick:n,title:"Toggle Sidebar",children:(0,Ie.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Ie.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,Ie.jsx)("line",{x1:"9",y1:"3",x2:"9",y2:"21"})]})})]}),(0,Ie.jsxs)("button",{className:g,onClick:a,children:[(0,Ie.jsx)("span",{className:v,children:(0,Ie.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",width:"20",height:"20",children:(0,Ie.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})})}),!e&&(0,Ie.jsx)("span",{className:x,children:_.newChat})]}),(0,Ie.jsxs)("button",{className:g,onClick:()=>b(_.toastKnowledgeBase),children:[(0,Ie.jsx)("span",{className:v,children:(0,Ie.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",width:"20",height:"20",children:(0,Ie.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})})}),!e&&(0,Ie.jsx)("span",{className:x,children:_.knowledgeBase})]})]}),!e&&(0,Ie.jsxs)("div",{className:f,children:[(0,Ie.jsx)("div",{className:j,children:_.recentChats}),s.map(e=>(0,Ie.jsx)("div",{className:`${C} ${e.id===t?w:""}`,onClick:()=>r(e.id),children:(0,Ie.jsx)("span",{className:y,children:e.title})},e.id))]}),(0,Ie.jsx)("div",{className:k,children:(0,Ie.jsxs)("a",{href:N,className:g,style:{textDecoration:"none"},children:[(0,Ie.jsx)("span",{className:v,children:(0,Ie.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",width:"20",height:"20",children:(0,Ie.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})})}),!e&&(0,Ie.jsx)("span",{className:x,children:_.backToHome})]})})]})}function Ke({steps:e,t:n}){const[t,i]=(0,s.useState)(!0);return(0,Ie.jsxs)("div",{className:`${ee} ${t?se:""}`,children:[(0,Ie.jsxs)("div",{className:ne,onClick:()=>i(!t),children:[(0,Ie.jsx)("span",{className:te}),(0,Ie.jsx)("span",{className:ie,children:n.thinkingProcess}),(0,Ie.jsx)("svg",{className:`${re} ${t?"":ae}`,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,Ie.jsx)("polyline",{points:"6 9 12 15 18 9"})})]}),!t&&(0,Ie.jsx)("div",{className:oe,children:e.map((e,n)=>(0,Ie.jsxs)("div",{className:le,children:[(0,Ie.jsx)("div",{className:ce,children:(0,Ie.jsx)("span",{children:e.name})}),e.detail&&(0,Ie.jsx)("div",{className:de,children:e.detail})]},n))})]})}function Ye({sources:e,t:n}){const[t,i]=(0,s.useState)(!1),r=e.filter(e=>e.used),a=e.filter(e=>!e.used);return(0,Ie.jsxs)("div",{className:ue,children:[r.map(e=>(0,Ie.jsxs)("div",{className:`${he} ${pe}`,children:[(0,Ie.jsxs)("span",{className:ge,children:["[",e.id,"]"]}),(0,Ie.jsx)("span",{className:ve,children:e.title})]},e.id)),a.length>0&&(0,Ie.jsxs)("div",{className:xe,children:[(0,Ie.jsxs)("button",{className:fe,onClick:()=>i(!t),children:[(0,Ie.jsxs)("span",{children:[t?n.collapse:n.expand," ",a.length," ",n.unreferencedDocs]}),(0,Ie.jsx)("svg",{className:t?je:"",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:(0,Ie.jsx)("polyline",{points:"6 9 12 15 18 9"})})]}),t&&a.map(e=>(0,Ie.jsxs)("div",{className:`${he} ${me}`,children:[(0,Ie.jsxs)("span",{className:ge,children:["[",e.id,"]"]}),(0,Ie.jsx)("span",{className:ve,children:e.title})]},e.id))]})]})}function Fe(e,n){const t=e.split("\n"),s=[];let i=0,r=0;for(;i<t.length;){const e=t[i];if(e.startsWith("```")){const a=e.slice(3).trim(),o=[];for(i++;i<t.length&&!t[i].startsWith("```");)o.push(t[i]),i++;i++,s.push((0,Ie.jsxs)("div",{className:O,children:[(0,Ie.jsxs)("div",{className:V,children:[(0,Ie.jsx)("span",{className:Q,children:a||"text"}),(0,Ie.jsxs)("button",{className:J,onClick:e=>{const n=o.join("\n");navigator.clipboard.writeText(n).then(()=>{e.currentTarget.classList.add(X),setTimeout(()=>e.currentTarget.classList.remove(X),2e3)})},children:[(0,Ie.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Ie.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,Ie.jsx)("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),(0,Ie.jsx)("span",{children:n.copy})]})]}),(0,Ie.jsx)("pre",{className:Z,children:(0,Ie.jsx)("code",{children:o.join("\n")})})]},r++));continue}if(e.startsWith("### "))s.push((0,Ie.jsx)("h3",{className:z,children:e.slice(4)},r++)),i++;else if(e.startsWith("## "))s.push((0,Ie.jsx)("h2",{className:E,children:e.slice(3)},r++)),i++;else if(e.startsWith("> "))s.push((0,Ie.jsx)("blockquote",{className:q,children:Oe(e.slice(2))},r++)),i++;else{if(e.startsWith("- ")){const e=[];for(;i<t.length&&t[i].startsWith("- ");)e.push(t[i].slice(2)),i++;s.push((0,Ie.jsx)("ul",{className:K,children:e.map((e,n)=>(0,Ie.jsx)("li",{className:Y,children:Oe(e)},n))},r++));continue}""!==e.trim()?(s.push((0,Ie.jsx)("p",{className:$,children:Oe(e)},r++)),i++):i++}}return s}function Oe(e){const n=[];let t=e,s=0;for(;t.length>0;){const e=t.match(/\*\*(.+?)\*\*/),i=t.match(/`(.+?)`/);let r=null,a=null;if(e&&i?e.index<i.index?(r=e,a="bold"):(r=i,a="code"):e?(r=e,a="bold"):i&&(r=i,a="code"),!r){n.push((0,Ie.jsx)("span",{children:t},s++));break}r.index>0&&n.push((0,Ie.jsx)("span",{children:t.substring(0,r.index)},s++)),"bold"===a?n.push((0,Ie.jsx)("strong",{children:r[1]},s++)):n.push((0,Ie.jsx)("code",{className:F,children:r[1]},s++)),t=t.substring(r.index+r[0].length)}return n}function Ve({message:e,t:n}){return"user"===e.role?(0,Ie.jsx)("div",{className:`${I} ${W}`,children:(0,Ie.jsx)("div",{className:H,children:e.content})}):(0,Ie.jsxs)("div",{className:`${I} ${D}`,children:[e.steps&&(0,Ie.jsx)(Ke,{steps:e.steps,t:n}),(0,Ie.jsx)("div",{className:H,children:Fe(e.content,n)}),e.sources&&e.sources.length>0&&(0,Ie.jsx)(Ye,{sources:e.sources,t:n})]})}function Qe({onSuggestionClick:e,t:n,chips:t}){return(0,Ie.jsx)("div",{className:Re,children:(0,Ie.jsx)("div",{className:Pe,children:(0,Ie.jsx)("span",{className:Ge,children:n.exploreToday})})})}function Je({pipelineIdx:e,onPipelineSelect:n}){const[t,i]=(0,s.useState)(!1),r=(0,s.useRef)(null),a=We[e];return(0,s.useEffect)(()=>{function e(e){r.current&&!r.current.contains(e.target)&&i(!1)}if(t)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[t]),(0,Ie.jsxs)("div",{className:A,ref:r,children:[(0,Ie.jsxs)("button",{className:N,onClick:()=>i(!t),children:[(0,Ie.jsx)("span",{className:R,children:a.name}),(0,Ie.jsx)("span",{className:P,children:"UltraRAG"}),(0,Ie.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{opacity:.4,transform:t?"rotate(180deg)":"none",transition:"transform 0.2s"},children:(0,Ie.jsx)("polyline",{points:"6 9 12 15 18 9"})})]}),t&&(0,Ie.jsx)("div",{className:G,children:We.map((t,s)=>(0,Ie.jsxs)("button",{className:`${S} ${s===e?M:""}`,onClick:()=>{n(s),i(!1)},children:[(0,Ie.jsx)("span",{children:t.name}),s===e&&(0,Ie.jsx)("span",{className:T,children:"\u2713"})]},t.id))})]})}function Xe({messages:e,onSendMessage:n,pipelineIdx:t,onPipelineSelect:i,onShowToast:r,isEmpty:a,t:o,sidebarCollapsed:l,onSidebarToggle:c}){const d=(0,s.useRef)(null),[u,h]=(0,s.useState)(""),[p,m]=(0,s.useState)(!1),g=(0,s.useRef)(null);(0,s.useEffect)(()=>{d.current&&(d.current.scrollTop=d.current.scrollHeight)},[e,p]),(0,s.useEffect)(()=>{g.current&&(g.current.style.height="auto",g.current.style.height=g.current.scrollHeight+"px")},[u]);const v=(0,s.useCallback)(e=>{const t=e||u.trim();t&&!p&&(h(""),m(!0),n(t),setTimeout(()=>m(!1),1500))},[u,p,n]),x=(0,s.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),v())},[v]);return(0,Ie.jsxs)("div",{className:b,children:[(0,Ie.jsxs)("header",{className:_,children:[l&&(0,Ie.jsx)("button",{className:Be,onClick:c,"aria-label":"Open menu",children:(0,Ie.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Ie.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,Ie.jsx)("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),(0,Ie.jsx)("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),(0,Ie.jsx)(Je,{pipelineIdx:t,onPipelineSelect:i})]}),(0,Ie.jsxs)("div",{className:`${U} ${a?B:""}`,children:[(0,Ie.jsx)("div",{className:L,ref:d,children:a?(0,Ie.jsx)(Qe,{onSuggestionClick:e=>v(e),t:o,chips:[]}):(0,Ie.jsxs)(Ie.Fragment,{children:[e.map((e,n)=>(0,Ie.jsx)(Ve,{message:e,t:o},n)),p&&(0,Ie.jsx)("div",{className:`${I} ${D}`,children:(0,Ie.jsxs)("div",{className:Se,children:[(0,Ie.jsx)("span",{className:Me}),(0,Ie.jsx)("span",{className:Me}),(0,Ie.jsx)("span",{className:Me})]})})]})}),(0,Ie.jsx)("div",{className:Ce,children:(0,Ie.jsxs)("div",{className:we,children:[(0,Ie.jsx)("textarea",{ref:g,className:ye,placeholder:o.askUltraRAG,rows:"1",value:u,onChange:e=>h(e.target.value),onKeyDown:x}),(0,Ie.jsxs)("div",{className:ke,children:[(0,Ie.jsx)("div",{className:be,children:(0,Ie.jsxs)("button",{className:Ae,onClick:()=>r(o.toastKnowledgeSwitch),children:[(0,Ie.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Ie.jsx)("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),(0,Ie.jsx)("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),(0,Ie.jsx)("span",{children:o.knowledgeBase})]})}),(0,Ie.jsx)("div",{className:_e,children:(0,Ie.jsx)("button",{className:Ne,onClick:()=>v(),disabled:p||!u.trim(),children:(0,Ie.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Ie.jsx)("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),(0,Ie.jsx)("polyline",{points:"5 12 12 5 19 12"})]})})})]})]})})]})]})}function Ze(){const e=(0,r.W)(),n=e?Ee.zh:Ee.en,t=e?"zh":"en",[i,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(1),[d,u]=(0,s.useState)(1),[h,p]=(0,s.useState)(He[t]),[m,g]=(0,s.useState)(De[t]),[v,x]=(0,s.useState)(""),[f,j]=(0,s.useState)(!1),C=h[l]||[],w=0===C.length,y=(0,s.useCallback)(e=>{x(e),j(!0)},[]),k=(0,s.useCallback)(e=>{c(e)},[]),b=(0,s.useCallback)(()=>{const e=Date.now();p(n=>({...n,[e]:[]})),g(t=>[{id:e,title:n.newChatTitle},...t]),c(e),y(n.toastNewChat)},[y,n]),_=(0,s.useCallback)(e=>{u(e),y(`${n.toastSwitchPipeline} ${We[e].name}`)},[y,n]),A=(0,s.useCallback)(e=>{p(n=>({...n,[l]:[...n[l]||[],{role:"user",content:e}]})),g(t=>t.map(t=>t.id===l&&t.title===n.newChatTitle?{...t,title:e.slice(0,20)+(e.length>20?"...":"")}:t)),setTimeout(()=>{const e=$e[t][0];p(n=>({...n,[l]:[...n[l]||[],{role:"assistant",...e}]}))},1500)},[l,t,n]);return(0,Ie.jsxs)("div",{className:a,children:[(0,Ie.jsx)(qe,{collapsed:i,onToggle:()=>o(!i),activeSession:l,sessions:m,onSessionChange:e=>{k(e),o(!0)},onNewChat:()=>{b(),o(!0)},onShowToast:y,t:n}),!i&&(0,Ie.jsx)("div",{className:Le,onClick:()=>o(!0)}),(0,Ie.jsx)(Xe,{messages:C,onSendMessage:A,pipelineIdx:d,onPipelineSelect:_,onShowToast:y,isEmpty:w,t:n,sidebarCollapsed:i,onSidebarToggle:()=>o(!1)}),(0,Ie.jsx)(ze,{message:v,visible:f,onClose:()=>j(!1)})]})}}}]);